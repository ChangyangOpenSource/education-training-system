const defaultoptions={url:void 0,method:"GET",qs:void 0,body:void 0,headers:void 0,type:"json",contentType:"application/json",crossOrigin:!0,credentials:void 0},makeOptions=(t,e)=>{let s={};return e?(s=e,t&&(s.url=t)):"string"==typeof t?s.url=t:s=t,s=Object.assign({},defaultoptions,s)},addQs=(t,e)=>{let s="",o=t;if(e&&"object"==typeof e){for(const t of Object.keys(e))s+=`&${t}=${e[t]}`;s.length>0&&(t.split("?").length<2?s=s.substring(1):0===t.split("?")[1].length&&(s=s.substring(1))),o=-1===t.indexOf("?")?`${t}?${s}`:`${t}${s}`}return o},request=(t,e)=>{const s=makeOptions(t,e),{method:o,body:n,headers:d,qs:r,type:i,contentType:a}=s;let l=s.url;r&&(l=addQs(l,r));let u=d;return d&&d["content-type"]||!a||(u=Object.assign({},d,{"content-type":a})),new Promise((t,e)=>{wx.request({url:l,method:o,data:n,header:u,dataType:i,success(s){(s.statusCode<200||s.statusCode>=300)&&e(s),t(s)},fail(t){e(t)}})})};export default request;